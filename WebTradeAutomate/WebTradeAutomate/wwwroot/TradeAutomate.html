<!DOCTYpE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link href="TradeAutomate.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div id="automate">
    </div>
    <div id="automatext1">
        <p>Товар:</p>
    </div>
    <div id="automatext4">
        <p class="itemsName">000</p>
    </div>
    <div id="automatext2">
        <p>Баланс:</p>
    </div>
    <div id="automatext3">
        <p class="itemsCost">000</p>
    </div>
    <div id="automatebuttontable">
        <table id="automatebutton">
            <tr id="automatebuttontr">
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton1"><p>1</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton2"><p>2</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton3"><p>3</p></button></td>
            </tr>
            <tr id="automatebuttontr">
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton4"><p>4</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton5"><p>5</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton6"><p>6</p></button></td>
            </tr>
            <tr id="automatebuttontr">
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton7"><p>7</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton8"><p>8</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton9"><p>9</p></button></td>
            </tr>
            <tr id="automatebuttontr">
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebuttonC"><p>C</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebutton0"><p>0</p></button></td>
                <td id="automatebuttontd"><button id="buttonautomateterminal" class="automatebuttonB"><p>B</p></button></td>
            </tr>
        </table>
    </div>
    <div>
    <table  id="automatebuttontable2" class="table table-condensed table-striped  col-md-6">
        <thead><tr><th>Id</th><th>Название</th><th>Количество</th><th>Стоимость</th><th></th></tr></thead>
        <tbody class="tbody1">
        </tbody>
    </table>
    </div>
    <div>
        <button id="coin1"  class="automatecoin1"><p></p></button>
    </div>
    <div>
        <button id="coin2" class="automatecoin2"><p></p></button>
    </div>
    <div>
        <button id="coin3" class="automatecoin3"><p></p></button>
    </div>
    <div>
        <button id="coin4" class="automatecoin4"><p></p></button>
    </div>
	<script>
		
      const automatecoin1 = document.querySelector('.automatecoin1');
      const automatecoin2 = document.querySelector('.automatecoin2');
      const automatecoin3 = document.querySelector('.automatecoin3');
      const automatecoin4 = document.querySelector('.automatecoin4');
      const automatebutton1 = document.querySelector('.automatebutton1');
      const automatebutton2 = document.querySelector('.automatebutton2');
      const automatebutton3 = document.querySelector('.automatebutton3');
      const automatebutton4 = document.querySelector('.automatebutton4');
      const automatebutton5 = document.querySelector('.automatebutton5');
      const automatebutton6 = document.querySelector('.automatebutton6');
      const automatebutton7 = document.querySelector('.automatebutton7');
      const automatebutton8 = document.querySelector('.automatebutton8');
      const automatebutton9 = document.querySelector('.automatebutton9');
      const automatebutton0 = document.querySelector('.automatebutton0');
      const automatebuttonC = document.querySelector('.automatebuttonC');
      const automatebuttonB = document.querySelector('.automatebuttonB');
	let itemsName = document.querySelector('.itemsName');
	let itemsCost = document.querySelector('.itemsCost');
	let Cost=0;
	function CheckName() {
		itemsName.textContent=Number(itemsName.textContent);
		if(Number(itemsName.textContent)>999)
		{
		itemsName.textContent='000';
		}
	}
	function CheckCost() {
	
		itemsCost.textContent=Cost;
		if(Number(itemsCost.textContent)>999)
		{
		itemsCost.textContent='000';
		Cost=0;
		}
	}
	automatecoin1.onclick=function() {
		Cost=Cost+1;
		CheckCost();
	}
	automatecoin2.onclick=function() {
		Cost=Cost+2;
		CheckCost();
	}
	automatecoin3.onclick=function() {
		Cost=Cost+5;
		CheckCost();
	}
	automatecoin4.onclick=function() {
		Cost=Cost+10;
		CheckCost();
	}
    automatebutton1.onclick=function() {
		itemsName.textContent=itemsName.textContent+'1';
		CheckName();
	}
    automatebutton2.onclick=function() {
		itemsName.textContent=itemsName.textContent+'2';
		CheckName();
		
	}
	automatebutton3.onclick=function() {
		itemsName.textContent=itemsName.textContent+'3';
		CheckName();
		
	}
	automatebutton4.onclick=function() {
		itemsName.textContent=itemsName.textContent+'4';
		CheckName();
		
	}
	automatebutton5.onclick=function() {
		itemsName.textContent=itemsName.textContent+'5';
		CheckName();
		
	}
	automatebutton6.onclick=function() {
		itemsName.textContent=itemsName.textContent+'6';
		CheckName();
		
	}
	automatebutton7.onclick=function() {
		itemsName.textContent=itemsName.textContent+'7';
		CheckName();
		
	}
	automatebutton8.onclick=function() {
		itemsName.textContent=itemsName.textContent+'8';
		CheckName();
		
	}
	automatebutton9.onclick=function() {
		itemsName.textContent=itemsName.textContent+'9';
		CheckName();
		
	}
	automatebutton0.onclick=function() {
		itemsName.textContent=itemsName.textContent+'0';
		CheckName();
		
	}
	 // Получение всех пользователей
        async function GetItems() {
            // отправляет запрос и получаем ответ
            const response = await fetch("/api/items", {
                method: "GET",
                headers: { "Accept": "application/json" }
            });
            // если запрос прошел нормально
            if (response.ok === true) {
                // получаем данные
                const items = await response.json();
                let rows = document.querySelector('.tbody1');
                items.forEach(item => {
                    // добавляем полученные элементы в таблицу
                    rows.append(row(item));
                });
            }
        }
        // Получение одного пользователя
            //async function GetItems(id) {
            //    const response = await fetch("/api/items/" + id, {
            //        method: "GET",
            //        headers: { "Accept": "application/json" }
            //    });
            //    if (response.ok === true) {
            //        const item = await response.json();
            //        const form = document.forms["userForm"];
            //        form.elements["id"].value = item.id;
            //        form.elements["name"].value = item.name;
            //        form.elements["cost"].value = item.cost;
            //        form.elements["quantity"].value = item.quantity;
            //    }
            //}
        // Добавление пользователя
            //async function CreateUser(itemName, itemcost) {

            //    const response = await fetch("api/items", {
            //        method: "POST",
            //        headers: { "Accept": "application/json", "Content-Type": "application/json" },
            //        body: JSON.stringify({
            //            name: itemName,
            //            cost: parseInt(itemCost, 10),
            //            quantity: parseInt(itemQuantity, 10)
            //        })
            //    });
            //    if (response.ok === true) {
            //        const item = await response.json();
            //        reset();
            //        document.querySelector("tbody").append(row(itemm));
            //    }
            //}
        // Изменение пользователя
            //async function EditUser(userId, userName, userAge) {
            //    const response = await fetch("api/users", {
            //        method: "PUT",
            //        headers: { "Accept": "application/json", "Content-Type": "application/json" },
            //        body: JSON.stringify({
            //            id: parseInt(userId, 10),
            //            name: userName,
            //            age: parseInt(userAge, 10)
            //        })
            //    });
            //    if (response.ok === true) {
            //        const user = await response.json();
            //        reset();
            //        document.querySelector("tr[data-rowid='" + user.id + "']").replaceWith(row(user));
            //    }
            //}
        // Удаление пользователя
            //async function DeleteUser(id) {
            //    const response = await fetch("/api/users/" + id, {
            //        method: "DELETE",
            //        headers: { "Accept": "application/json" }
            //    });
            //    if (response.ok === true) {
            //        const user = await response.json();
            //        document.querySelector("tr[data-rowid='" + user.id + "']").remove();
            //    }
            //}

        // сброс формы
        function reset() {
            const form = document.forms["userForm"];
            form.reset();
            form.elements["id"].value = 0;
        }
        // создание строки для таблицы
        function row(item) {

            const tr = document.createElement("tr");
            tr.setAttribute("data-rowid", item.id);

            const idTd = document.createElement("td");
            idTd.append(item.id);
            tr.append(idTd);

            const nameTd = document.createElement("td");
            nameTd.append(item.name);
            tr.append(nameTd);

            const costTd = document.createElement("td");
            costTd.append(item.cost);
            tr.append(costTd);

            const quantityTd = document.createElement("td");
            quantityTd.append(item.quantity);
            tr.append(quantityTd);

            const linksTd = document.createElement("td");

            //const editLink = document.createElement("a");
            //editLink.setAttribute("data-id", item.id);
            //editLink.setAttribute("style", "cursor:pointer;padding:15px;");
            //editLink.append("Изменить");
            //editLink.addEventListener("click", e => {

            //    e.preventDefault();
            //    Getitem(item.id);
            //});
            //linksTd.append(editLink);

            //const removeLink = document.createElement("a");
            //removeLink.setAttribute("data-id", item.id);
            //removeLink.setAttribute("style", "cursor:pointer;padding:15px;");
            //removeLink.append("Удалить");
            //removeLink.addEventListener("click", e => {

            //    e.preventDefault();
            //    DeleteItem(item.id);
            //});

            //linksTd.append(removeLink);
            tr.appendChild(linksTd);

            return tr;
        }
        // сброс значений формы
            //document.getElementById("reset").click(function (e) {

            //    e.preventDefault();
            //    reset();
            //})

        // отправка формы
            //document.forms["userForm"].addEventListener("submit", e => {
            //    e.preventDefault();
            //    const form = document.forms["userForm"];
            //    const id = form.elements["id"].value;
            //    const name = form.elements["name"].value;
            //    const age = form.elements["age"].value;
            //    if (id == 0)
            //        CreateUser(name, age);
            //    else
            //        EditUser(id, name, age);
            //});

        // загрузка пользователей
        GetItems();
	</script>
</body>
</html>